<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SmartSpend</title>
<link rel="stylesheet" href="CSS/SmartSpend.css">
</head>
<body>

<div class="container">

    <!-- Main App -->
    <div id="mainApp">

        <!-- Daily Allowance Setting -->
        <div class="card">
            <h3>Daily Allowance</h3>
            <div class="input-group">
                <label for="dailyAllowanceInput">Set Your Daily Allowance ($)</label>
                <input type="number" id="dailyAllowanceInput" placeholder="20.00" min="1" step="0.01" value="20">
            </div>
            <button onclick="updateDailyAllowance()"><span>Update Allowance</span></button>
        </div>

        <!-- Quick Actions -->
        <div class="card actions-card">
            <h3>Quick Actions</h3>
            <div class="actions">
                <button onclick="openModal('expense')"><span>‚ûñ Add Expense</span></button>
                <button onclick="openModal('income')"><span>‚ûï Add Income</span></button>
                <button onclick="openModal('savings')"><span>üíµ Add to Savings</span></button>
                <button onclick="showProjection()"><span>üìä View Projection</span></button>
                <button onclick="resetAllData()"><span>üîÑ Reset Data</span></button>
                <button onclick="exportData()"><span>üì• Export Data</span></button>
            </div>
        </div>

        <!-- Stats Dashboard -->
        <div class="card stats-card">
            <h3>Dashboard</h3>
            <div class="stats-grid">
                <div class="stat-box">
                    Total Income<br><span id="totalIncome">$0.00</span>
                </div>
                <div class="stat-box">
                    Total Expenses<br><span id="totalExpenses">$0.00</span>
                </div>
                <div class="stat-box">
                    Balance<br><span id="balance">$0.00</span>
                </div>
                <div class="stat-box">
                    Total Savings<br><span id="totalSavings">$0.00</span>
                </div>
            </div>
        </div>

        <!-- Projection Card -->
        <div class="card hidden" id="projectionCard">
            <h3>üìä Projected Savings Analysis</h3>
            <p>Daily Allowance: <span id="projAllowance">$0.00</span></p>
            <p>Average Daily Spending: <span id="projAvgSpending">$0.00</span></p>
            <p>Days Remaining (Month): <span id="projDaysLeft">30</span></p>
            <p>Projected Monthly Savings: <span id="projSavings">$0.00</span></p>
            <p>Potential Total: <span id="projTotal">$0.00</span></p>
            <button onclick="hideProjection()"><span>Close</span></button>
        </div>

        <!-- Recent Transactions -->
        <div class="card">
            <h3>Recent Transactions</h3>
            <div id="transactionsList">
                <p class="empty-state">üìù No transactions yet</p>
            </div>
            <button onclick="clearTransactions()"><span>Clear All</span></button>
        </div>

        <!-- Savings Queue -->
        <div class="card">
            <h3>Savings Queue (FIFO)</h3>
            <div id="savingsList">
                <p class="empty-state">üí∞ No savings yet</p>
            </div>
            <button onclick="clearSavings()"><span>Clear All</span></button>
        </div>

    </div>

</div>

<!-- Modal -->
<div class="modal" id="modal">
    <div class="modal-content">
        <h3 id="modalTitle">Add Transaction</h3>
        <div class="input-group">
            <label id="modalDescLabel">Description</label>
            <input type="text" id="modalDesc">
        </div>
        <div class="input-group">
            <label>Amount ($)</label>
            <input type="number" id="modalAmount" min="0.01" step="0.01">
        </div>
        <button onclick="submitTransaction()"><span>Submit</span></button>
        <button onclick="closeModal()"><span>Cancel</span></button>
    </div>
</div>

<script src="JS/SmartSpend.js"></script>
<script>
// Initialize app with default allowance on load
dailyAllowance = 20;
updateDashboard();

// Function to update daily allowance
function updateDailyAllowance() {
    const newAllowance = parseFloat(document.getElementById('dailyAllowanceInput').value);
    if (!newAllowance || newAllowance <= 0) {
        alert('Please enter a valid allowance amount');
        return;
    }
    dailyAllowance = newAllowance;
    alert('Daily allowance updated to $' + newAllowance.toFixed(2));
}
</script>
</body>
</html>